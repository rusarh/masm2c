--- real
+++ emulated
@@ -3303,13 +3303,13 @@
 shldl      A=12345678 B=21ad3d34 C=00000010 R=567821ad CCIN=0000 CC=0000
 shldw      A=12345678 B=21ad3d34 C=00000010 R=12343d34 CCIN=0000 CC=0000
 shldl      A=12345678 B=21ad3d34 C=00000011 R=acf0435a CCIN=0000 CC=0080
-shldw      A=12345678 B=21ad3d34 C=00000011 R=12347a68 CCIN=0000 CC=0000
+shldw      A=12345678 B=21ad3d34 C=00000011 R=12347a68 CCIN=0000 CC=0001
 shldl      A=12345678 B=21ad3d34 C=00000012 R=59e086b4 CCIN=0000 CC=0001
 shldw      A=12345678 B=21ad3d34 C=00000012 R=1234f4d1 CCIN=0000 CC=0080
 shldl      A=12345678 B=21ad3d34 C=00000013 R=b3c10d69 CCIN=0000 CC=0080
 shldw      A=12345678 B=21ad3d34 C=00000013 R=1234e9a2 CCIN=0000 CC=0081
 shldl      A=12345678 B=21ad3d34 C=00000014 R=67821ad3 CCIN=0000 CC=0001
-shldw      A=12345678 B=21ad3d34 C=00000014 R=1234d345 CCIN=0000 CC=0081
+shldw      A=12345678 B=21ad3d34 C=00000014 R=1234d345 CCIN=0000 CC=0080
 shldl      A=12345678 B=21ad3d34 C=00000015 R=cf0435a7 CCIN=0000 CC=0080
 shldw      A=12345678 B=21ad3d34 C=00000015 R=1234a68a CCIN=0000 CC=0081
 shldl      A=12345678 B=21ad3d34 C=00000016 R=9e086b4f CCIN=0000 CC=0081
@@ -3317,11 +3317,11 @@
 shldl      A=12345678 B=21ad3d34 C=00000017 R=3c10d69e CCIN=0000 CC=0001
 shldw      A=12345678 B=21ad3d34 C=00000017 R=12349a2b CCIN=0000 CC=0080
 shldl      A=12345678 B=21ad3d34 C=00000018 R=7821ad3d CCIN=0000 CC=0000
-shldw      A=12345678 B=21ad3d34 C=00000018 R=12343456 CCIN=0000 CC=0001
+shldw      A=12345678 B=21ad3d34 C=00000018 R=12343456 CCIN=0000 CC=0000
 shldl      A=12345678 B=21ad3d34 C=00000019 R=f0435a7a CCIN=0000 CC=0080
-shldw      A=12345678 B=21ad3d34 C=00000019 R=123468ac CCIN=0000 CC=0000
+shldw      A=12345678 B=21ad3d34 C=00000019 R=123468ac CCIN=0000 CC=0001
 shldl      A=12345678 B=21ad3d34 C=0000001a R=e086b4f4 CCIN=0000 CC=0081
-shldw      A=12345678 B=21ad3d34 C=0000001a R=1234d159 CCIN=0000 CC=0080
+shldw      A=12345678 B=21ad3d34 C=0000001a R=1234d159 CCIN=0000 CC=0081
 shldl      A=12345678 B=21ad3d34 C=0000001b R=c10d69e9 CCIN=0000 CC=0081
 shldw      A=12345678 B=21ad3d34 C=0000001b R=1234a2b3 CCIN=0000 CC=0081
 shldl      A=12345678 B=21ad3d34 C=0000001c R=821ad3d3 CCIN=0000 CC=0081
@@ -3329,7 +3329,7 @@
 shldl      A=12345678 B=21ad3d34 C=0000001d R=0435a7a6 CCIN=0000 CC=0001
 shldw      A=12345678 B=21ad3d34 C=0000001d R=12348acf CCIN=0000 CC=0080
 shldl      A=12345678 B=21ad3d34 C=0000001e R=086b4f4d CCIN=0000 CC=0000
-shldw      A=12345678 B=21ad3d34 C=0000001e R=1234159e CCIN=0000 CC=0001
+shldw      A=12345678 B=21ad3d34 C=0000001e R=1234159e CCIN=0000 CC=0000
 shldl      A=12345678 B=21ad3d34 C=0000001f R=10d69e9a CCIN=0000 CC=0000
 shldw      A=12345678 B=21ad3d34 C=0000001f R=12342b3c CCIN=0000 CC=0000
 shldl      A=82345679 B=813f3421 C=00000000 R=82345679 CCIN=0000 CC=0000
@@ -3367,15 +3367,15 @@
 shldl      A=82345679 B=813f3421 C=00000010 R=5679813f CCIN=0000 CC=0000
 shldw      A=82345679 B=813f3421 C=00000010 R=82343421 CCIN=0000 CC=0001
 shldl      A=82345679 B=813f3421 C=00000011 R=acf3027e CCIN=0000 CC=0080
-shldw      A=82345679 B=813f3421 C=00000011 R=82346842 CCIN=0000 CC=0000
+shldw      A=82345679 B=813f3421 C=00000011 R=82346842 CCIN=0000 CC=0001
 shldl      A=82345679 B=813f3421 C=00000012 R=59e604fc CCIN=0000 CC=0001
 shldw      A=82345679 B=813f3421 C=00000012 R=8234d085 CCIN=0000 CC=0080
 shldl      A=82345679 B=813f3421 C=00000013 R=b3cc09f9 CCIN=0000 CC=0080
 shldw      A=82345679 B=813f3421 C=00000013 R=8234a10a CCIN=0000 CC=0081
 shldl      A=82345679 B=813f3421 C=00000014 R=679813f3 CCIN=0000 CC=0001
-shldw      A=82345679 B=813f3421 C=00000014 R=82344215 CCIN=0000 CC=0001
+shldw      A=82345679 B=813f3421 C=00000014 R=82344215 CCIN=0000 CC=0000
 shldl      A=82345679 B=813f3421 C=00000015 R=cf3027e6 CCIN=0000 CC=0080
-shldw      A=82345679 B=813f3421 C=00000015 R=8234842a CCIN=0000 CC=0080
+shldw      A=82345679 B=813f3421 C=00000015 R=8234842a CCIN=0000 CC=0081
 shldl      A=82345679 B=813f3421 C=00000016 R=9e604fcd CCIN=0000 CC=0081
 shldw      A=82345679 B=813f3421 C=00000016 R=82340855 CCIN=0000 CC=0001
 shldl      A=82345679 B=813f3421 C=00000017 R=3cc09f9a CCIN=0000 CC=0001
@@ -3383,19 +3383,19 @@
 shldl      A=82345679 B=813f3421 C=00000018 R=79813f34 CCIN=0000 CC=0000
 shldw      A=82345679 B=813f3421 C=00000018 R=82342156 CCIN=0000 CC=0000
 shldl      A=82345679 B=813f3421 C=00000019 R=f3027e68 CCIN=0000 CC=0080
-shldw      A=82345679 B=813f3421 C=00000019 R=823442ac CCIN=0000 CC=0000
+shldw      A=82345679 B=813f3421 C=00000019 R=823442ac CCIN=0000 CC=0001
 shldl      A=82345679 B=813f3421 C=0000001a R=e604fcd0 CCIN=0000 CC=0081
-shldw      A=82345679 B=813f3421 C=0000001a R=82348559 CCIN=0000 CC=0080
+shldw      A=82345679 B=813f3421 C=0000001a R=82348559 CCIN=0000 CC=0081
 shldl      A=82345679 B=813f3421 C=0000001b R=cc09f9a1 CCIN=0000 CC=0081
 shldw      A=82345679 B=813f3421 C=0000001b R=82340ab3 CCIN=0000 CC=0001
 shldl      A=82345679 B=813f3421 C=0000001c R=9813f342 CCIN=0000 CC=0081
-shldw      A=82345679 B=813f3421 C=0000001c R=82341567 CCIN=0000 CC=0000
+shldw      A=82345679 B=813f3421 C=0000001c R=82341567 CCIN=0000 CC=0001
 shldl      A=82345679 B=813f3421 C=0000001d R=3027e684 CCIN=0000 CC=0001
 shldw      A=82345679 B=813f3421 C=0000001d R=82342acf CCIN=0000 CC=0000
 shldl      A=82345679 B=813f3421 C=0000001e R=604fcd08 CCIN=0000 CC=0000
 shldw      A=82345679 B=813f3421 C=0000001e R=8234559e CCIN=0000 CC=0000
 shldl      A=82345679 B=813f3421 C=0000001f R=c09f9a10 CCIN=0000 CC=0080
-shldw      A=82345679 B=813f3421 C=0000001f R=8234ab3c CCIN=0000 CC=0080
+shldw      A=82345679 B=813f3421 C=0000001f R=8234ab3c CCIN=0000 CC=0081
 shrdl      A=12345678 B=21ad3d34 C=00000000 R=12345678 CCIN=0000 CC=0000
 shrdw      A=12345678 B=21ad3d34 C=00000000 R=12345678 CCIN=0000 CC=0000
 shrdl      A=12345678 B=21ad3d34 C=00000001 R=091a2b3c CCIN=0000 CC=0000
@@ -3437,7 +3437,7 @@
 shrdl      A=12345678 B=21ad3d34 C=00000013 R=a7a68246 CCIN=0000 CC=0081
 shrdw      A=12345678 B=21ad3d34 C=00000013 R=123407a6 CCIN=0000 CC=0001
 shrdl      A=12345678 B=21ad3d34 C=00000014 R=d3d34123 CCIN=0000 CC=0080
-shrdw      A=12345678 B=21ad3d34 C=00000014 R=123483d3 CCIN=0000 CC=0080
+shrdw      A=12345678 B=21ad3d34 C=00000014 R=123483d3 CCIN=0000 CC=0081
 shrdl      A=12345678 B=21ad3d34 C=00000015 R=69e9a091 CCIN=0000 CC=0001
 shrdw      A=12345678 B=21ad3d34 C=00000015 R=1234c1e9 CCIN=0000 CC=0081
 shrdl      A=12345678 B=21ad3d34 C=00000016 R=b4f4d048 CCIN=0000 CC=0081
@@ -3449,13 +3449,13 @@
 shrdl      A=12345678 B=21ad3d34 C=00000019 R=d69e9a09 CCIN=0000 CC=0080
 shrdw      A=12345678 B=21ad3d34 C=00000019 R=12343c1e CCIN=0000 CC=0001
 shrdl      A=12345678 B=21ad3d34 C=0000001a R=6b4f4d04 CCIN=0000 CC=0001
-shrdw      A=12345678 B=21ad3d34 C=0000001a R=12349e0f CCIN=0000 CC=0080
+shrdw      A=12345678 B=21ad3d34 C=0000001a R=12349e0f CCIN=0000 CC=0081
 shrdl      A=12345678 B=21ad3d34 C=0000001b R=35a7a682 CCIN=0000 CC=0000
-shrdw      A=12345678 B=21ad3d34 C=0000001b R=1234cf07 CCIN=0000 CC=0081
+shrdw      A=12345678 B=21ad3d34 C=0000001b R=1234cf07 CCIN=0000 CC=0080
 shrdl      A=12345678 B=21ad3d34 C=0000001c R=1ad3d341 CCIN=0000 CC=0000
 shrdw      A=12345678 B=21ad3d34 C=0000001c R=12346783 CCIN=0000 CC=0001
 shrdl      A=12345678 B=21ad3d34 C=0000001d R=0d69e9a0 CCIN=0000 CC=0001
-shrdw      A=12345678 B=21ad3d34 C=0000001d R=1234b3c1 CCIN=0000 CC=0081
+shrdw      A=12345678 B=21ad3d34 C=0000001d R=1234b3c1 CCIN=0000 CC=0080
 shrdl      A=12345678 B=21ad3d34 C=0000001e R=86b4f4d0 CCIN=0000 CC=0080
 shrdw      A=12345678 B=21ad3d34 C=0000001e R=123459e0 CCIN=0000 CC=0001
 shrdl      A=12345678 B=21ad3d34 C=0000001f R=435a7a68 CCIN=0000 CC=0000
@@ -3463,7 +3463,7 @@
 shrdl      A=82345679 B=813f3421 C=00000000 R=82345679 CCIN=0000 CC=0000
 shrdw      A=82345679 B=813f3421 C=00000000 R=82345679 CCIN=0000 CC=0000
 shrdl      A=82345679 B=813f3421 C=00000001 R=c11a2b3c CCIN=0000 CC=0081
-shrdw      A=82345679 B=813f3421 C=00000001 R=8234ab3c CCIN=0000 CC=0881
+shrdw      A=82345679 B=813f3421 C=00000001 R=8234ab3c CCIN=0000 CC=0081
 shrdl      A=82345679 B=813f3421 C=00000002 R=608d159e CCIN=0000 CC=0000
 shrdw      A=82345679 B=813f3421 C=00000002 R=8234559e CCIN=0000 CC=0000
 shrdl      A=82345679 B=813f3421 C=00000003 R=30468acf CCIN=0000 CC=0000
@@ -3495,15 +3495,15 @@
 shrdl      A=82345679 B=813f3421 C=00000010 R=34218234 CCIN=0000 CC=0000
 shrdw      A=82345679 B=813f3421 C=00000010 R=82343421 CCIN=0000 CC=0000
 shrdl      A=82345679 B=813f3421 C=00000011 R=9a10c11a CCIN=0000 CC=0080
-shrdw      A=82345679 B=813f3421 C=00000011 R=82349a10 CCIN=0000 CC=0081
+shrdw      A=82345679 B=813f3421 C=00000011 R=82349a10 CCIN=0000 CC=0080
 shrdl      A=82345679 B=813f3421 C=00000012 R=cd08608d CCIN=0000 CC=0080
 shrdw      A=82345679 B=813f3421 C=00000012 R=82344d08 CCIN=0000 CC=0000
 shrdl      A=82345679 B=813f3421 C=00000013 R=e6843046 CCIN=0000 CC=0081
-shrdw      A=82345679 B=813f3421 C=00000013 R=82342684 CCIN=0000 CC=0000
+shrdw      A=82345679 B=813f3421 C=00000013 R=82342684 CCIN=0000 CC=0001
 shrdl      A=82345679 B=813f3421 C=00000014 R=f3421823 CCIN=0000 CC=0080
-shrdw      A=82345679 B=813f3421 C=00000014 R=82349342 CCIN=0000 CC=0080
+shrdw      A=82345679 B=813f3421 C=00000014 R=82349342 CCIN=0000 CC=0081
 shrdl      A=82345679 B=813f3421 C=00000015 R=f9a10c11 CCIN=0000 CC=0081
-shrdw      A=82345679 B=813f3421 C=00000015 R=8234c9a1 CCIN=0000 CC=0080
+shrdw      A=82345679 B=813f3421 C=00000015 R=8234c9a1 CCIN=0000 CC=0081
 shrdl      A=82345679 B=813f3421 C=00000016 R=fcd08608 CCIN=0000 CC=0081
 shrdw      A=82345679 B=813f3421 C=00000016 R=8234e4d0 CCIN=0000 CC=0081
 shrdl      A=82345679 B=813f3421 C=00000017 R=7e684304 CCIN=0000 CC=0000
@@ -3511,15 +3511,15 @@
 shrdl      A=82345679 B=813f3421 C=00000018 R=3f342182 CCIN=0000 CC=0000
 shrdw      A=82345679 B=813f3421 C=00000018 R=82347934 CCIN=0000 CC=0000
 shrdl      A=82345679 B=813f3421 C=00000019 R=9f9a10c1 CCIN=0000 CC=0080
-shrdw      A=82345679 B=813f3421 C=00000019 R=82343c9a CCIN=0000 CC=0000
+shrdw      A=82345679 B=813f3421 C=00000019 R=82343c9a CCIN=0000 CC=0001
 shrdl      A=82345679 B=813f3421 C=0000001a R=4fcd0860 CCIN=0000 CC=0001
-shrdw      A=82345679 B=813f3421 C=0000001a R=82349e4d CCIN=0000 CC=0080
+shrdw      A=82345679 B=813f3421 C=0000001a R=82349e4d CCIN=0000 CC=0081
 shrdl      A=82345679 B=813f3421 C=0000001b R=27e68430 CCIN=0000 CC=0000
-shrdw      A=82345679 B=813f3421 C=0000001b R=8234cf26 CCIN=0000 CC=0081
+shrdw      A=82345679 B=813f3421 C=0000001b R=8234cf26 CCIN=0000 CC=0080
 shrdl      A=82345679 B=813f3421 C=0000001c R=13f34218 CCIN=0000 CC=0000
-shrdw      A=82345679 B=813f3421 C=0000001c R=82346793 CCIN=0000 CC=0000
+shrdw      A=82345679 B=813f3421 C=0000001c R=82346793 CCIN=0000 CC=0001
 shrdl      A=82345679 B=813f3421 C=0000001d R=09f9a10c CCIN=0000 CC=0000
-shrdw      A=82345679 B=813f3421 C=0000001d R=8234b3c9 CCIN=0000 CC=0081
+shrdw      A=82345679 B=813f3421 C=0000001d R=8234b3c9 CCIN=0000 CC=0080
 shrdl      A=82345679 B=813f3421 C=0000001e R=04fcd086 CCIN=0000 CC=0000
 shrdw      A=82345679 B=813f3421 C=0000001e R=823459e4 CCIN=0000 CC=0001
 shrdl      A=82345679 B=813f3421 C=0000001f R=027e6843 CCIN=0000 CC=0000
@@ -4162,14 +4162,6 @@
 seta       1
 ja         0
 seta       0
-jp         1
-setp       1
-jp         0
-setp       0
-jnp        0
-setnp      0
-jnp        1
-setnp      1
 jo         0
 seto       0
 jo         1
@@ -4404,8 +4396,8 @@
 repnz cmpsw ESI=000007fe EDI=0000080e EAX=12345678 ECX=00000010 EFL=0040
 repnz cmpsl ESI=000007fc EDI=0000080c EAX=12345678 ECX=00000010 EFL=0040
 xlat: EAX=12345688
-popl esp=09abcdef
-popw esp=00bc6058
+popl esp=12345688
+popw esp=12345688
 lea 0x4000 = 00004000
 lea (%%eax) = 00000001
 lea (%%ebx) = 00000002
@@ -4466,5 +4458,5 @@
 cbw        A=8234a6f8 R=8234fff8
 cwde       A=8234a6f8 R=ffffa6f8
 cwd        A=8234a6f8 R=8234a6f8:8345ffff
-cdq        A=8234a6f8 R=8234a6f8:ffffffff
+unimp cdq        A=8234a6f8 R=8234a6f8:8345a1f2
 bswapl    : A=12345678 R=78563412
